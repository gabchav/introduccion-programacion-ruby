<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Consumir Web Services - Introducción Programación Ruby</title>

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.0/reset.min.css" integrity="sha512-Mjxkx+r7O/OLQeKeIBCQ2yspG1P5muhAtv/J+p2/aPnSenciZWm5Wlnt+NOUNA4SHbnBIE/R2ic0ZBiCXdQNUg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.0/reveal.min.css" integrity="sha512-e3dnmFe5hH2bJx1MvUU3PFToGVQ2xykp/VGERCkuh4lTGMJ5QuxKFRIwix8DfnfkavwJiL6rehb9e1d6mFLwlg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.0/theme/blood.min.css" integrity="sha512-rW57Zu9aMzwqAo5AyPqx9AcN+r1JawUBBFxt5RcJS23sh1kX3KeXJYsDBTZbeV2f11jHCoyW5zmnBChL4LFxxQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.0/plugin/highlight/monokai.min.css" integrity="sha512-z8wQkuDRFwCBfoj7KOiu1MECaRVoXx6rZQWL21x0BsVVH7JkqCp1Otf39qve6CrCycOOL5o9vgfII5Smds23rg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-separator="^---$" data-separator-vertical="^===$" data-markdown data-line-numbers>
    				<textarea data-template>
## [Introducción a la Programación en Ruby](#)
### Consumir Web Services  
[Santiago Neira ](#)

---
## [Que es una API](#)
- Es una sigla en inglés que se Refiere a [**A**](#)plication [**P**](#)rogramming [**I**](#)nterface 
- Es palabras simples es el lugar donde [2 o más componentes](#), sistemas, actores u otro elemento [interactúa](#) 
- Es una forma de [contrato](#) de cómo funcionará la interacción 

===
<!-- .slide: data-background-iframe="https://docs.ruby-lang.org/en/3.1/Kernel.html" -->
## [Ejemplo API Ruby Kernel](#)

===
## [Ejemplo API](#)

![API WS](https://drek4537l1klr.cloudfront.net/geewax3/v-5/Figures/image004.jpg)

===
## [Ejemplo API](#)

![API WS](https://drek4537l1klr.cloudfront.net/geewax3/Figures/01-02.png)

---
## [Que es un Web Services (WS)](#)
- Es una [API](#) disponible sobre la [Web](#) 

- Actualmente los 2 tipos de Web Services más difundidos son:
	* [RESTful](#) Web Services 
	* [SOAP](#) Web Services 

===
## [RESTful WS](#)
- La sigla significa [Representational State Transfer](#) y es un estilo de arquitectura 

- Totalmente basado en protocolo [HTTP](#) 

- El formato de intercambio más utilizado es [JSON](#), pero también puedes utilizar otros como XML o texto plano.

- Utiliza los [métodos HTTP](#) para dar significado a los mensajes: GET, POST, PUT y DELETE 

===
## [RESTful WS](#)

![RESTful WS](https://gocoding.org/wp-content/uploads/2019/06/Restful-Web-Services.png)

===
## [RESTful HTTP Methods](#)

![HTTP Methods](https://www.edureka.co/blog/wp-content/uploads/2019/06/CRUD-Operations-What-is-REST-API-Edureka-1.png) <!-- .element: style="background: white;" -->

===
## [SOAP](#)

- SOAP está fuertemente basado en [XML](#) para su funcionamiento 

- Soporta [varios protocolos](#) para su comunicación 

- Los servicios web se describen usando [WSDL](#) (Web Services Description Language). 

===
## [RESTful vs SOAP](#)

- SOAP fue más popular en un inicio 

- Pero con el tiempo RESTful WS fue ganando terreno por ser más liviano y rápido de implementar 

- Actualmente ambos son soportados ampliamente en los lenguajes de programación 

---
## [Diferencias entre API y WS](#)
- Los Web Services son APIs sobre internet 

- Pero las APIs NO necesariamente son Web Services 

===
## [Lectura para Profundización](#)

https://livebook.manning.com/book/api-design-patterns/chapter-1/v-5/12
---
## [Protocolos y Formatos](#)
- Protocolos: 
	* HTTP(S)	
	* SMTP 
	* JMS 

- Formatos: 
	* JSON 
	* XML	

===
## [HTTP](#)

- Es un [protocolo](#) sobre [internet](#) 

- Permite sistemas distribuidos, colaborativos e hipermedia (gráficos, audios, videos, texto, entre otros)

- HTTP representa a sus [recursos](#) a través de [URIs](#) con esquemas HTTP o HTTPS 

- Estos recursos son invocados a través de distintos [métodos: GET, POST, PUT, DELETE](#) 

===
## [JSON](#)

- La sigla JSON significa [Javascript Object Notation](#)

- Es un [formato ligero de intercambio de datos](#) 

- Es de fácil lectura, escritura y manipulación por parte de humanos y máquinas 

===
## [Ejemplo JSON](#)

```json[] 
{
	"menu": {
		"id": "file",
		"value": "File",
		"popup": {
			"menuitem": [
				{"value": "New", "onclick": "CreateNewDoc()"},
				{"value": "Open", "onclick": "OpenDoc()"},
				{"value": "Close", "onclick": "CloseDoc()"}
			]
		}
	}
}
```

===
## [XML](#)

- Su sigla significa [eXtensible Markup Language](#)

- Como su nombre lo indica, es un formato extensible que usa etiquetas en su sintaxis 

- Es un formato estándar y ampliamente usados para el intercambio de datos 

===
## [Ejemplo XML](#)
Compare con JSON:
```xml[] 
<menu id="file" value="File">
	<popup>
		<menuitem value="New" onclick="CreateNewDoc()" />
		<menuitem value="Open" onclick="OpenDoc()" />
		<menuitem value="Close" onclick="CloseDoc()" />
	</popup>
</menu>
```

---
## [Consumir WS JSON](#)
- En este caso utilizaremos las librerías internas de Ruby ***json*** y ***open-uri***
```ruby 
require 'json'
require 'open-uri'
```
- [***json***](#) nos permite trabajar con el formato JSON 

- y [***open-uri***](#) nos permite traer la respuesta de una URL en internet 

===
## [WS a Consumir](#)
https://jsonplaceholder.typicode.com/comments?postId=1

```json[] 
[
  {
    "postId": 1,
    "id": 1,
    "name": "id labore ex et quam laborum",
    "email": "Eliseo@gardner.biz",
    "body": "laudantium enim quasi est quidem magnam voluptate ipsam eos\ntempora quo necessitatibus\ndolor quam autem quasi\nreiciendis et nam sapiente accusantium"
  },
  {
    "postId": 1,
    "id": 2,
    "name": "quo vero reiciendis velit similique earum",
    "email": "Jayne_Kuhic@sydney.com",
    "body": "est natus enim nihil est dolore omnis voluptatem numquam\net omnis occaecati quod ullam at\nvoluptatem error expedita pariatur\nnihil sint nostrum voluptatem reiciendis et"
  },
  ... 
]
```
===
## [Estructura del JSON](#)

![superclase](http://www.plantuml.com/plantuml/proxy?cache=no&fmt=svg&src=https://stgoneira.github.io/introduccion-programacion-ruby/json/comentarios.puml)

===
## [Ejemplo](#)

```ruby[] 
require 'json'
require 'open-uri'

url = 'https://jsonplaceholder.typicode.com/comments?postId=1'

# https://rubyapi.org/3.1/o/stringio
comentariosStr = URI.open( url ).string 

# array con hashes por cada indice
comentarios = JSON.parse( comentariosStr )

comentarios.each do |comentario| 
    tema   = comentario["name"]
    cuerpo = comentario["body"]
    email  = comentario["email"]
    puts "Email: #{email} \nTema: #{tema} \nComentario: #{cuerpo} \n\n"
end 
```

---
## [Ejercicios](#)

===
## [Ejercicio 1](#)

Muestre por pantalla el nombre, email, teléfono y dirección de los usuarios ubicados en el RESTful WS de la URI https://jsonplaceholder.typicode.com/users

[Tiempo estimado:](#) 15 minutos 

===
## [Ejercicio 2](#)

Muestre por pantalla los siguientes indicadores del día de hoy: dólar, Euro, UTM y UF. 

Utilice la API disponible en https://mindicador.cl/ 

[Tiempo estimado:](#) 25-30 minutos 

===
## [Ejercicio 3](#)

Muestre por pantalla la URL de la imagen astronómica del día. 

Utilice la API disponible en https://api.nasa.gov/ 

[Tiempo estimado:](#) 25-30 minutos 

				    </textarea>
				</section>
			</div>
		</div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.0/reveal.min.js" integrity="sha512-m6ShsCUzCQmgDHleTy2FbuzCPKnSOOypMBALE6LT/q858WxkGMJLajB5Obw+BT8C3mIIoBfEM5F+G5/Eemixfw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.0/plugin/notes/notes.min.js" integrity="sha512-1D/hQT/6yIzQICAQCvGWV1x+85VZFQGZGcRE3P7f1/5b8bk3dvbaiOF2lLENEqr6lYQ0NZataWohlZQvblyxcA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		
		<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.0/plugin/markdown/markdown.min.js" integrity="sha512-QAU7Ux8iEB53koLKFCtddfFp0D1+uQWoX3ROnRDLeiE98XHOkMciaup0Spc014jQAuJaqz8VjUZdBqriheI4Lg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.0/plugin/highlight/highlight.min.js" integrity="sha512-U3fPDUX5bMrn1wnYqjaK44MFA9E6MKS+zPAg9WPAGF5XhReBeDj3FGaA831CjueG+YJxYA3WaO/m33kMIoOs/A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
